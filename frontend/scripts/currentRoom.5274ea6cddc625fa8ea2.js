(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{262:function(e,t,n){"use strict";n(18),n(19),n(25),n(20),n(138),n(21),n(30),n(26),n(31),n(27),n(28),n(29);var o=n(0),i=n.n(o);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,n,o,r=l(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=r.call(this,e)).state={d:"",n:""},t.handleCancel=t.handleCancel.bind(p(t)),t.handleChange=t.handleChange.bind(p(t)),t.handleSave=t.handleSave.bind(p(t)),t}return t=u,(n=[{key:"componentDidUpdate",value:function(e){e.itemCount!==this.props.itemCount&&this.setState({d:"",h:void 0,l:void 0,n:"",q:1})}},{key:"render",value:function(){var e=this.state.d.length>0&&(this.state.q||1)>0&&this.state.n.length>0;return i.a.createElement("li",{className:"list-group-item"},i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{placeholder:"Item name",type:"text",className:"form-control",name:"n",value:this.state.n,onChange:this.handleChange}),i.a.createElement("input",{placeholder:"Item quantity",type:"number",className:"form-control",name:"q",value:this.state.q,onChange:this.handleChange,min:1}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("span",{className:"input-group-text"},i.a.createElement("input",{type:"checkbox",name:"h",checked:this.state.h,onChange:this.handleChange})," Hidden"),i.a.createElement("span",{className:"input-group-text"},i.a.createElement("input",{type:"checkbox",name:"l",checked:this.state.l,onChange:this.handleChange})," Locked"))),i.a.createElement("div",{className:"input-group input-group-sm"},i.a.createElement("textarea",{placeholder:"Description",className:"form-control",value:this.state.d,name:"d",rows:2,onChange:this.handleChange}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{hidden:!e,className:"btn btn-outline-success",type:"button",onClick:this.handleSave},"Save"),i.a.createElement("button",{className:"btn btn-outline-warning",type:"button",onClick:this.handleCancel},"Cancel"))))}},{key:"handleCancel",value:function(){this.props.cancelEdit()}},{key:"handleChange",value:function(e){var t=e.target.name;switch(t){case"d":case"n":this.setState(a({},t,e.target.value));break;case"h":case"l":this.setState(a({},t,e.target.checked));break;case"q":this.setState({q:e.target.valueAsNumber})}}},{key:"handleSave",value:function(){var e=[];0===this.state.d.length&&e.push("No description provided"),(this.state.q||1)<1&&e.push("Cannot have less than one item"),e.length>0?alert("Failed to save item:\n".concat(e.join("\n"))):this.props.handleItemChange(void 0,this.state)}}])&&s(t.prototype,n),o&&s(t,o),u}(i.a.PureComponent);t.a=m},293:function(e,t,n){"use strict";n.r(t),n.d(t,"CurrentRooms",(function(){return ue}));n(18),n(19),n(25),n(66),n(266),n(47),n(20),n(46),n(136),n(21),n(268),n(269),n(30),n(270),n(26),n(31),n(27),n(281),n(28),n(271),n(29);var o=n(0),i=n.n(o),r=n(286),a=n(2),s=n(131),c=n(262),l=n(95),u=n(1),p=(n(67),n(253)),h=n(282);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=["#1ABC9C","#2ECC71","#3498DB","#9B59B6","#E91E63","#11806A","#1F8B4C","#206694","#71368A","#AD1457","#F1C40F","#E67E22","#E74C3C","#95A5A6","#607D8B","#C27C0E","#A84300","#992D22","#979C9F","#546E7A"],S={r:52,g:152,b:182},O={option:function(e,t){return E(E({},e),{},{color:t.isSelected?"black":"blue"})}},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,n,o,r=b(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,e)).state={color:S},t.handleChange=t.handleChange.bind(v(t)),t.handleChangeComplete=t.handleChangeComplete.bind(v(t)),t.handleCreate=t.handleCreate.bind(v(t)),t.handleColor=t.handleColor.bind(v(t)),t.handleSelectChange=t.handleSelectChange.bind(v(t)),t.handleVisibilityChange=t.handleVisibilityChange.bind(v(t)),t}return t=s,(n=[{key:"componentDidUpdate",value:function(e){this.props.rooms!==e.rooms&&this.setState({color:S,description:"",name:"",section:"",showColor:!1,visibility:void 0})}},{key:"render",value:function(){var e=this.props.sections.map((function(e){return{label:e,value:e}})),t=this.state.section?{label:this.state.section,value:this.state.section}:null,n="rgb(".concat(this.state.color.r,",").concat(this.state.color.g,",").concat(this.state.color.b,")"),o=this.state.description&&this.state.name&&this.state.section&&this.state.visibility;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"input-group mb-4"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text"},"Name and section")),i.a.createElement("input",{className:"form-control",onChange:this.handleChange,name:"n",placeholder:"name",type:"text",value:this.state.name}),i.a.createElement("div",{className:"input-group-btn btn-group-toggle","data-toggle":"buttons"},i.a.createElement("label",{className:"btn btn-primary".concat("publicW"===this.state.visibility?" active":""),id:"publicW",onClick:this.handleVisibilityChange},i.a.createElement("input",{type:"radio",name:"v"}),"Publically writeable"),i.a.createElement("label",{className:"btn btn-primary".concat("publicR"===this.state.visibility?" active":""),id:"publicR",onClick:this.handleVisibilityChange},i.a.createElement("input",{type:"radio",name:"v"}),"Publically readable"),i.a.createElement("label",{className:"btn btn-primary".concat("private"===this.state.visibility?" active":""),id:"private",onClick:this.handleVisibilityChange},i.a.createElement("input",{type:"radio",name:"v"}),"Private"))),i.a.createElement("div",{className:"row mb-4"},i.a.createElement(h.a,{placeholder:"Select or create section",className:"col-8",isClearable:!0,onChange:this.handleSelectChange,options:e,value:t,styles:O}),i.a.createElement("div",{className:"col-4"},i.a.createElement("button",{className:"btn col-12",onClick:this.handleColor,style:{backgroundColor:n}},"Set color"),this.state.showColor&&i.a.createElement("div",{className:"popover custom"},i.a.createElement("div",{className:"cover",onClick:this.handleColor}),i.a.createElement(p.BlockPicker,{color:this.state.color,colors:k,onChangeComplete:this.handleChangeComplete})))),i.a.createElement("div",{className:"input-group mb-4"},i.a.createElement("div",{className:"input-group-prepend"},i.a.createElement("span",{className:"input-group-text"},"Description")),i.a.createElement("textarea",{className:"form-control",name:"d",onChange:this.handleChange,placeholder:"Description",rows:2,value:this.state.description}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("span",{className:"input-group-text"},i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"h",checked:this.state.history,onChange:this.handleChange})," Allow viewing history")))),i.a.createElement("button",{type:"button",className:"btn btn-primary col-12",onClick:this.handleCreate,disabled:!o},"Create room"))}},{key:"handleChange",value:function(e){switch(e.target.name){case"d":this.setState({description:e.target.value});break;case"h":this.setState({history:e.target.checked});break;case"n":this.setState({name:e.target.value})}}},{key:"handleChangeComplete",value:function(e){this.setState({color:e.rgb})}},{key:"handleColor",value:function(){this.setState((function(e){return{showColor:!e.showColor}}))}},{key:"handleCreate",value:function(){if(this.state.description&&this.state.name&&this.state.section&&this.state.visibility){var e={c:[this.state.color.r,this.state.color.g,this.state.color.b],d:this.state.description,h:this.state.history,n:this.state.name,s:this.state.section,v:this.state.visibility};this.props.socket.emit(a.h,e)}else alert("Make sure you provide a description, name, section, and visibility")}},{key:"handleSelectChange",value:function(e){e&&this.setState({section:e.value})}},{key:"handleVisibilityChange",value:function(e){e.currentTarget&&this.setState({visibility:e.currentTarget.id})}}])&&d(t.prototype,n),o&&d(t,o),s}(i.a.PureComponent);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=V(e);if(t){var i=V(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,o,r=D(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={},t.handleCancel=t.handleCancel.bind(x(t)),t.handleChange=t.handleChange.bind(x(t)),t.handleDelete=t.handleDelete.bind(x(t)),t.handleEdit=t.handleEdit.bind(x(t)),t.handleSave=t.handleSave.bind(x(t)),t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t;this.props.room&&this.props.room.description!==(null===(t=e.room)||void 0===t?void 0:t.description)&&this.setState({description:void 0,editing:!1})}},{key:"render",value:function(){if(!this.props.room)return null;var e="input-group mb-4 ";if(this.props.admin&&(e+="col-lg-8 col-xs-12"),this.props.admin){if(this.state.editing){var t=this.state.description&&this.state.description!==this.props.room.description;return i.a.createElement("div",{className:e},i.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,value:this.state.description||this.props.room.description}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-success",hidden:!t,onClick:this.handleSave,type:"button"},"Save"),i.a.createElement("button",{className:"btn btn-outline-warning",onClick:this.handleCancel,type:"button"},"Cancel edit")))}return i.a.createElement("div",{className:e},i.a.createElement("textarea",{className:"form-control",value:this.props.room.description,disabled:!0}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-success",onClick:this.handleEdit,type:"button"},"Edit description"),i.a.createElement("button",{className:"btn btn-outline-danger",onClick:this.handleDelete,type:"button"},"Delete room")))}return i.a.createElement("div",{className:e},i.a.createElement("div",{className:"form-control"},this.props.room.description))}},{key:"handleCancel",value:function(){this.setState({description:void 0,editing:!1})}},{key:"handleChange",value:function(e){this.setState({description:e.target.value})}},{key:"handleDelete",value:function(){if(this.props.room){var e="Are you sure you want to delete the room ".concat(this.props.room.name,"?");confirm(e)&&this.props.delete(this.props.room.id)}}},{key:"handleEdit",value:function(){this.setState({editing:!0})}},{key:"handleSave",value:function(){this.props.room&&this.state.description&&this.props.newDescription(this.props.room.id,this.props.room.description,this.state.description)}}])&&P(t.prototype,n),o&&P(t,o),a}(i.a.PureComponent);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=F(e);if(t){var i=F(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(a,e);var t,n,o,r=q(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={},t.handleCancel=t.handleCancel.bind(M(t)),t.handleChange=t.handleChange.bind(M(t)),t.handleEdit=t.handleEdit.bind(M(t)),t.handleSave=t.handleSave.bind(M(t)),t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){var t;this.props.room&&this.props.room.name!==(null===(t=e.room)||void 0===t?void 0:t.name)&&this.setState({name:void 0,editing:!1})}},{key:"render",value:function(){if(!this.props.room)return null;if(this.state.editing){var e=this.state.name&&this.state.name!==this.props.room.name;return i.a.createElement("div",{className:"input-group col-lg-4 col-xs-12 mb-4"},i.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,value:this.state.name||this.props.room.name}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-success",hidden:!e,onClick:this.handleSave,type:"button"},"Save"),i.a.createElement("button",{className:"btn btn-outline-warning",onClick:this.handleCancel,type:"button"},"Cancel edit")))}return i.a.createElement("div",{className:"input-group col-lg-4 col-xs-12 mb-4"},i.a.createElement("textarea",{className:"form-control",value:this.props.room.name,disabled:!0}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-success",onClick:this.handleEdit,type:"button"},"Edit name")))}},{key:"handleCancel",value:function(){this.setState({name:void 0,editing:!1})}},{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleEdit",value:function(){this.setState({editing:!0})}},{key:"handleSave",value:function(){this.props.room&&this.state.name&&this.props.newName(this.props.room.id,this.props.room.name,this.state.name)}}])&&T(t.prototype,n),o&&T(t,o),a}(i.a.PureComponent);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Q(e);if(t){var i=Q(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(s,e);var t,n,o,r=L(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,e)).state={},t.cancelHistory=t.cancelHistory.bind(K(t)),t.cancelVisibility=t.cancelVisibility.bind(K(t)),t.editHistory=t.editHistory.bind(K(t)),t.editVisibility=t.editVisibility.bind(K(t)),t.handleHistoryChange=t.handleHistoryChange.bind(K(t)),t.handleVisibilityChange=t.handleVisibilityChange.bind(K(t)),t.saveHistory=t.saveHistory.bind(K(t)),t.saveVisibility=t.saveVisibility.bind(K(t)),t}return t=s,(n=[{key:"componentDidUpdate",value:function(e){this.props.room!==e.room&&this.setState({editHistory:!1,editVisibility:!1,history:!1,visibility:void 0})}},{key:"render",value:function(){var e,t,n,o;if(!this.props.room)return null;switch(this.props.room.visibility){case"private":t=" private";break;case"publicR":t=" publicly readable";break;case"publicW":t=" publicly writeable";break;default:t=""}return this.props.admin&&(o=this.state.editVisibility?i.a.createElement("div",{className:"mt-4"},i.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},i.a.createElement("label",{className:"btn btn-primary".concat("publicW"===this.state.visibility?" active":""),id:"publicW",onClick:this.handleVisibilityChange},i.a.createElement("input",{type:"radio",name:"v"}),"Publically writeable"),i.a.createElement("label",{className:"btn btn-primary".concat("publicR"===this.state.visibility?" active":""),id:"publicR",onClick:this.handleVisibilityChange},i.a.createElement("input",{type:"radio",name:"v"}),"Publically readable"),i.a.createElement("label",{className:"btn btn-primary".concat("private"===this.state.visibility?" active":""),id:"private",onClick:this.handleVisibilityChange},i.a.createElement("input",{type:"radio",name:"v"}),"Private")),i.a.createElement("button",{type:"button",className:"btn btn-success",hidden:this.state.visibility===this.props.room.visibility,onClick:this.saveVisibility},"Save change"),i.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.cancelVisibility},"Cancel change")):i.a.createElement("button",{type:"button",className:"btn btn-primary ml-4",onClick:this.editVisibility},"Edit visibility"),n=this.state.editHistory?i.a.createElement("div",{className:"mt-4"},i.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},i.a.createElement("label",{className:"btn btn-primary".concat(this.state.history?" active":""),onClick:this.handleHistoryChange},i.a.createElement("input",{type:"checkbox",checked:this.state.history}),this.state.history?"Showing history":"Hiding history")),i.a.createElement("button",{type:"button",className:"btn btn-success",hidden:(this.state.history||!1)===(this.props.room.history||!1),onClick:this.saveHistory},"Save change"),i.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.cancelHistory},"Cancel change")):i.a.createElement("button",{type:"button",className:"btn btn-primary ml-4",onClick:this.editHistory},"Edit history")),i.a.createElement("div",{className:"col-12 row mb-4"},i.a.createElement("h4",{className:"col-6"},"This room is",i.a.createElement("strong",null,t),o),i.a.createElement("h4",{className:"col-6"},"History is",i.a.createElement("strong",null,(null===(e=this.props.room)||void 0===e?void 0:e.history)?" saved":" not saved"),n))}},{key:"cancelHistory",value:function(){this.setState({editHistory:!1,history:void 0})}},{key:"editHistory",value:function(){var e;this.setState({editHistory:!0,history:null===(e=this.props.room)||void 0===e?void 0:e.history})}},{key:"cancelVisibility",value:function(){this.setState({editVisibility:!1,visibility:void 0})}},{key:"editVisibility",value:function(){var e;this.setState({editVisibility:!0,visibility:null===(e=this.props.room)||void 0===e?void 0:e.visibility})}},{key:"handleHistoryChange",value:function(){this.setState((function(e){return{history:!e.history}}))}},{key:"handleVisibilityChange",value:function(e){e.currentTarget&&this.setState({visibility:e.currentTarget.id})}},{key:"saveHistory",value:function(){if(this.props.room&&void 0!==this.state.history&&this.props.room.history!==this.state.history&&confirm("Do you want to change the ability to see history in ".concat(this.props.room.name,"?"))){var e={n:!0===this.state.history,r:this.props.room.id};this.props.socket.emit(a.k,e)}}},{key:"saveVisibility",value:function(){if(this.props.room&&this.state.visibility&&this.props.room.visibility!==this.state.visibility&&confirm("Are you sure you want to change the visibility of ".concat(this.props.room.name,"?"))){var e={n:this.state.visibility,o:this.props.room.visibility,r:this.props.room.id};this.props.socket.emit(a.p,e)}}}])&&z(t.prototype,n),o&&z(t,o),s}(i.a.PureComponent);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ie(e);if(t){var i=ie(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return ne(this,n)}}function ne(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?oe(e):t}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce={menu:function(e,t){return ae(ae({},e),{},{"z-index":5})},option:function(e,t){return ae(ae({},e),{},{backgroundColor:t.isSelected?"#00bc8c":"white",borderBottom:"1px solid black",color:"black",padding:10})}},le=[],ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(h,e);var t,n,o,p=te(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this,e)).state={roomId:void 0},t.handleChange=t.handleChange.bind(oe(t)),t.delete=t.delete.bind(oe(t)),t.newDescription=t.newDescription.bind(oe(t)),t.newItem=t.newItem.bind(oe(t)),t.newName=t.newName.bind(oe(t)),t}return t=h,o=[{key:"cancelItemEdit",value:function(){$("#itemCreateModal").modal("hide")}},{key:"toggleItem",value:function(){$("#itemCreateModal").modal("show")}},{key:"toggleModal",value:function(){$("#roomCreateModal").modal("show")}}],(n=[{key:"componentDidUpdate",value:function(e){if(this.state.roomId)if(this.props.rooms.has(this.state.roomId)){var t=this.props.rooms.get(this.state.roomId),n=e.rooms.get(this.state.roomId);n&&t.inventory.length>n.inventory.length&&$("#itemCreateModal").modal("hide")}else this.setState({roomId:void 0});e.rooms.size!==this.props.rooms.size&&$("#roomCreateModal").modal("hide")}},{key:"render",value:function(){var e,t=this,n=null,o=new Set,a=Array.from(this.props.rooms.entries()).filter((function(e){return e[1].present})).sort((function(e,t){return Object(u.b)(e[1].name,t[1].name,1)})).map((function(e){var i={label:e[1].name,value:e[0]};return e[0]===t.state.roomId&&(n=i),o.add(e[1].section),i})),p=this.props.selected?"visible":"invisible",m=this.props.rooms.get(null===n?"":n.value);return e=this.props.admin?i.a.createElement("div",{className:"mb-4 row col-12"},i.a.createElement(r.a,{options:a,onChange:this.handleChange,styles:ce,className:"col-lg-10 col-xs-8",value:n}),i.a.createElement("button",{className:"col-lg-2 col-xs-4 btn btn-primary",onClick:h.toggleModal},"New room")):i.a.createElement(r.a,{options:a,onChange:this.handleChange,styles:ce,className:"col-12 mb-4",value:n}),i.a.createElement("div",{className:p},e,i.a.createElement("div",{className:this.props.admin?"col-12 row":"col-12"},this.props.admin&&i.a.createElement(U,{room:m,newName:this.newName}),i.a.createElement(I,{admin:this.props.admin,delete:this.delete,newDescription:this.newDescription,room:m})),i.a.createElement(X,{admin:this.props.admin,room:m,socket:this.props.socket}),i.a.createElement(s.a,{edit:this.props.admin,handleItemChange:this.newItem,inventory:(null==m?void 0:m.inventory)||le,name:"room",selected:!0,sidebar:this.props.sidebar,width:this.props.width}),this.props.admin&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{body:i.a.createElement(N,{rooms:this.props.rooms.size,sections:Array.from(o),socket:this.props.socket}),id:"roomCreate",title:"Create a new room"}),i.a.createElement("div",{className:"mt-4 col-12"},i.a.createElement("button",{type:"button",className:"btn btn-primary col-12",onClick:h.toggleItem},"New item")),i.a.createElement(l.a,{body:i.a.createElement(c.a,{itemCount:(null==m?void 0:m.inventory.length)||0,cancelEdit:h.cancelItemEdit,handleItemChange:this.newItem}),id:"itemCreate",title:"Create an item"})))}},{key:"handleChange",value:function(e){this.setState({roomId:e.value})}},{key:"delete",value:function(e){this.props.socket.emit(a.i,e)}},{key:"newDescription",value:function(e,t,n){var o={n:n,o:t,r:e};this.props.socket.emit(a.j,o)}},{key:"newItem",value:function(e,t){if(this.state.roomId&&this.props.rooms.has(this.state.roomId)){var n={n:t,o:e,r:this.props.rooms.get(this.state.roomId).id};this.props.socket.emit(a.m,n)}}},{key:"newName",value:function(e,t,n){var o={n:n,o:t,r:e};this.props.socket.emit(a.o,o)}}])&&Z(t.prototype,n),o&&Z(t,o),h}(i.a.PureComponent);t.default=ue}}]);