(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{257:function(t,e,r){"use strict";r(38),r(53),r(54),r(86),r(85),r(39),r(84),r(87),r(55),r(56),r(57),r(58),r(59),r(60),r(61);var n=r(0),o=r.n(n);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,r,n,a=f(c);function c(){return l(this,c),a.apply(this,arguments)}return e=c,(r=[{key:"render",value:function(){var t=this,e=!0,r=this.props.options.map((function(r){var n,a=i(r,2),c=a[0],l=a[1],u="btn btn-primary".concat(e?" active":"");return n=t.props.handleSort?o.a.createElement("label",{key:c,className:u,onClick:function(){return t.props.handleSort(c)}},o.a.createElement("input",{type:"radio",name:t.props.name,id:c}),l):o.a.createElement("label",{key:c,className:u},o.a.createElement("input",{type:"radio",name:t.props.name,id:c}),l),e=!1,n}));return o.a.createElement("div",{className:"input-group col-12"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:this.props.placeholder,value:this.props.filter,onChange:this.props.handleFilter}),o.a.createElement("div",{className:"input-group-append btn-group btn-group-toggle","data-toggle":"buttons"},r))}}])&&u(e.prototype,r),n&&u(e,n),c}(o.a.PureComponent);e.a=h},297:function(t,e,r){"use strict";r.r(e);r(38),r(53),r(54),r(86),r(85),r(39),r(261),r(84),r(87),r(254),r(55),r(137),r(56),r(57),r(58),r(288),r(272),r(59),r(289),r(60),r(290),r(280),r(256),r(61);var n=r(0),o=r.n(n),a=r(248),i=r(303),c=r(257),l=r(2),u=(r(135),o.a.memo((function(t){var e="".concat(t.isAuthor?"right":"left"," alert alert-primary"),r=t.isAuthor?"You":t.author,n=new Date(t.time).toLocaleString("en-US");return o.a.createElement("div",{className:e},o.a.createElement("div",{className:"msg-header"},r," ",o.a.createElement("span",null,"(",n,")")),o.a.createElement("div",null,t.content))})));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(i,t);var e,r,n,a=m(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={},e.messages=o.a.createRef(),e.handleScroll=e.handleScroll.bind(y(e)),e.scroll=-1,e}return e=i,(r=[{key:"componentDidMount",value:function(){var t=-1===this.scroll?this.messages.current.scrollHeight:this.scroll;this.messages.current.scrollTop=t}},{key:"componentDidUpdate",value:function(){-1===this.scroll&&(this.messages.current.scrollTop=this.messages.current.scrollHeight)}},{key:"render",value:function(){var t=this,e=this.props.archive.concat(this.props.messages).map((function(e){var r=t.props.username===e.author;return o.a.createElement("div",{key:e.id},o.a.createElement(u,{isAuthor:r,author:e.author,content:e.content,time:e.time}))}));return o.a.createElement("div",{className:"card room"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},this.props.name," (",this.props.section,")"),o.a.createElement("button",{type:"button",className:"close",onClick:function(){return t.props.toggleModal(t.props.id)}},o.a.createElement("span",null,"^")),o.a.createElement("div",{className:"card-text",ref:this.messages,onScroll:this.handleScroll},e)))}},{key:"handleScroll",value:function(){var t=this.messages.current;this.scroll=t.scrollTop===t.scrollTopMax?-1:t.scrollTop}}])&&f(e.prototype,r),n&&f(e,n),i}(o.a.PureComponent);r(263),r(264);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var o=A(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var N=[];function P(t,e){if(0===t.length)return!0;var r,n=_(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.startsWith("a:")){var a=o.substring(2);if(e.author.startsWith(a))return!0}else if(e.content.includes(o))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}var k,C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(i,t);var e,r,n,a=E(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={filter:""},e.handleFilter=e.handleFilter.bind(O(e)),e}return e=i,(r=[{key:"render",value:function(){var t,e,r=this,n=this.props.rooms.get(this.props.roomId);n?(t=n.archive,e=n.messages):(t=[],e=[]);var a,i,l=this.state.filter.split(",").filter((function(t){return t.length>0})),s=[],f=_(t);try{for(f.s();!(a=f.n()).done;){var p=a.value,m=this.props.username===p.author;P(l,p)&&s.push(o.a.createElement(u,{key:p.id,isAuthor:m,author:p.author,content:p.content,time:p.time}))}}catch(t){f.e(t)}finally{f.f()}t.length>0&&s.push(o.a.createElement("hr",{key:"hr",className:"bg-dark"})),n&&n.hasArchive||(i=o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return r.props.getLogs(r.props.roomId)}},"Get logs"));var h,y,d=_(e);try{for(d.s();!(h=d.n()).done;){var b=h.value,v=this.props.username===b.author;P(l,b)&&s.push(o.a.createElement(u,{key:b.id,isAuthor:v,author:b.author,content:b.content,time:b.time}))}}catch(t){d.e(t)}finally{d.f()}(s.length>0||""!==this.state.filter)&&(y=o.a.createElement(c.a,{name:this.props.roomId,filter:this.state.filter,handleFilter:this.handleFilter,options:N,placeholder:"Enter text to search, or a: to find a sender"}));var g=s.length>0?o.a.createElement("hr",{className:"bg-dark"}):void 0;return o.a.createElement("div",{className:"modal fade",id:"roomsModal",tabIndex:-1,role:"dialog"},o.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",id:"roomsModalLabel"},null==n?void 0:n.name," (",null==n?void 0:n.section,")"),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:(null==n?void 0:n.description)||""}}),o.a.createElement("hr",{className:"bg-dark"}),y,g,o.a.createElement("div",{className:"messages"},s)),o.a.createElement("div",{className:"modal-footer"},i,o.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}},{key:"handleFilter",value:function(t){this.setState({filter:t.target.value})}}])&&g(e.prototype,r),n&&g(e,n),i}(o.a.PureComponent);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=z(t);if(e){var o=z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return D(this,r)}}function D(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?H(t):e}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.ALPHA_INC_SECTION="atoz-s",t.ALPHA_DEC_SECTION="ztoa-s",t.ALPHA_INC_ROOM="atoz-r",t.ALPHA_DEC_ROOM="ztoa-r"}(k||(k={}));var F=[[k.ALPHA_INC_SECTION,"A to Z (by section)"],[k.ALPHA_DEC_SECTION,"Z to A (by section)"],[k.ALPHA_INC_ROOM,"A to Z (by room)"],[k.ALPHA_DEC_ROOM,"Z to A (by room)"]],W=["lg","md","sm","xs","xxs"],U={lg:12,md:10,sm:6,xs:6,xxs:6};function Z(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function J(t){return new RegExp("^".concat(t.split("*").map(Z).join(".*"),".*"))}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(s,t);var e,r,n,u=L(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=u.call(this,t)).state={cols:12,filter:"",roomId:void 0,sizes:new Map,sort:k.ALPHA_INC_ROOM},e.handleFilter=e.handleFilter.bind(H(e)),e.handleLayout=e.handleLayout.bind(H(e)),e.toggleModal=e.toggleModal.bind(H(e)),e.handleSort=e.handleSort.bind(H(e)),e.handleWidth=e.handleWidth.bind(H(e)),e}return e=s,(r=[{key:"render",value:function(){var t=this,e=[],r=Object(l.c)(this.props),n=0,i=0,u=Array.from(this.props.rooms.entries()),s=this.state.sort;if(""!==this.state.filter){var f=this.state.filter.split(",").filter((function(t){return t.replace("s:","").length>0})).map(J);u=u.filter((function(t){var e,r=I(f);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.test(t[1].name)||n.test("s:".concat(t[1].section)))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}))}var p,m=s.startsWith("atoz")?1:-1,h=(u=u.sort((function(t,e){var r=t[1],n=e[1];return s.endsWith("-s")?Object(l.d)(r.section,n.section,m):Object(l.d)(r.name,n.name,m)}))).map((function(r){var a=r[1].name,c=4,l=6;if(t.state.sizes.has(a)){var u=t.state.sizes.get(a);l=u[0],c=u[1]}return e.push({i:a,x:n,y:i,w:l,h:c}),(n+=6)>=t.state.cols&&(n=0,i++),o.a.createElement("div",{key:a},o.a.createElement(b,{archive:r[1].archive,id:r[0],section:r[1].section,description:r[1].description,name:a,messages:r[1].messages,username:t.props.username,toggleModal:t.toggleModal}))})),y={},d=I(W);try{for(d.s();!(p=d.n()).done;)y[p.value]=e}catch(t){d.e(t)}finally{d.f()}var v=this.props.selected?"visible":"invisible";return o.a.createElement("div",{className:v},o.a.createElement(c.a,{filter:this.state.filter,handleFilter:this.handleFilter,options:F,handleSort:this.handleSort,placeholder:"a room name, sector (s:), wildcard (*), or list (comma separated)",name:"rooms"}),o.a.createElement(a.Responsive,{className:"layout rooms mt-4",rowHeight:60,width:r,layouts:y,onLayoutChange:this.handleLayout,onWidthChange:this.handleWidth,cols:U},h),o.a.createElement(C,{getLogs:this.props.getLogs,roomId:this.state.roomId||"",rooms:this.props.rooms,username:this.props.username}))}},{key:"handleFilter",value:function(t){this.setState({filter:t.target.value})}},{key:"handleLayout",value:function(t){Object(i.a)(t,this)}},{key:"toggleModal",value:function(t){this.setState({roomId:t}),$("#roomsModal").modal("show")}},{key:"handleSort",value:function(t){this.setState({sort:t})}},{key:"handleWidth",value:function(t,e,r){r!==this.state.cols&&this.setState({cols:r})}}])&&M(e.prototype,r),n&&M(e,n),s}(o.a.PureComponent);e.default=G},303:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r(38),r(53),r(54),r(85),r(39),r(87),r(55),r(137),r(57),r(59),r(60),r(61);function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){0!==t.length&&e.setState((function(e){var r,o=e.sizes,a=new Map,i=!1,c=n(t);try{for(c.s();!(r=c.n()).done;){var l=r.value,u=o.get(l.i);void 0===u||u[0]!==l.w||u[1]!==l.h?(a.set(l.i,[l.w,l.h]),i=!0):u?a.set(l.i,u):a.set(l.i,[l.w,l.h])}}catch(t){c.e(t)}finally{c.f()}return i?{sizes:a}:{sizes:o}}))}}}]);