(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{247:function(t,e,n){"use strict";var i=n(7),o=n(21),r=n(17),a=n(6),s=n(243),l=[],c=l.sort,u=a((function(){l.sort(void 0)})),p=a((function(){l.sort(null)})),m=s("sort");i({target:"Array",proto:!0,forced:u||!p||!m},{sort:function(t){return void 0===t?c.call(r(this)):c.call(r(this),o(t))}})},248:function(t,e,n){"use strict";var i=n(0),o=n.n(i),r=o.a.memo((function(t){var e,n="".concat(t.id,"Modal");return e="string"==typeof t.body&&t.html?o.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.body}}):t.body,o.a.createElement("div",{className:"modal fade",id:n,tabIndex:-1,role:"dialog"},o.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-xl",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",id:"".concat(n,"Label")},t.title),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},o.a.createElement("span",{"aria-hidden":"true"},"Ã—"))),o.a.createElement("div",{className:"modal-body"},e),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}));e.a=r},296:function(t,e,n){"use strict";n.r(e),n.d(e,"CurrentRooms",(function(){return F}));n(50),n(51),n(52),n(128),n(85),n(35),n(84),n(247),n(53),n(54),n(55),n(132),n(56),n(57),n(281),n(58),n(59);var i=n(16),o=n(0),r=n.n(o),a=n(282),s=n(1),l=n(248),c=n(2);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=y(t);if(e){var o=y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(a,t);var e,n,i,o=d(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).state={},e.handleCancel=e.handleCancel.bind(f(e)),e.handleChange=e.handleChange.bind(f(e)),e.handleDelete=e.handleDelete.bind(f(e)),e.handleEdit=e.handleEdit.bind(f(e)),e.handleSave=e.handleSave.bind(f(e)),e}return e=a,(n=[{key:"componentDidUpdate",value:function(t){var e;this.props.room&&this.props.room.description!==(null===(e=t.room)||void 0===e?void 0:e.description)&&this.setState({description:void 0,editing:!1})}},{key:"render",value:function(){if(!this.props.room)return null;var t="input-group mb-4 ";if(this.props.admin&&(t+="col-lg-8 col-xs-12"),this.props.admin){if(this.state.editing){var e=this.state.description&&this.state.description!==this.props.room.description;return r.a.createElement("div",{className:t},r.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,value:this.state.description||this.props.room.description}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-success",hidden:!e,onClick:this.handleSave,type:"button"},"Save"),r.a.createElement("button",{className:"btn btn-outline-warning",onClick:this.handleCancel,type:"button"},"Cancel edit")))}return r.a.createElement("div",{className:t},r.a.createElement("textarea",{className:"form-control",value:this.props.room.description,disabled:!0}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:this.handleEdit,type:"button"},"Edit description"),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:this.handleDelete,type:"button"},"Delete room")))}return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"form-control"},this.props.room.description))}},{key:"handleCancel",value:function(){this.setState({description:void 0,editing:!1})}},{key:"handleChange",value:function(t){this.setState({description:t.target.value})}},{key:"handleDelete",value:function(){if(this.props.room){var t="Are you sure you want to delete the room ".concat(this.props.room.name,"?");confirm(t)&&this.props.delete(this.props.room.id)}}},{key:"handleEdit",value:function(){this.setState({editing:!0})}},{key:"handleSave",value:function(){this.props.room&&this.state.description&&this.props.newDescription(this.props.room.id,this.props.room.description,this.state.description)}}])&&p(e.prototype,n),i&&p(e,i),a}(r.a.PureComponent);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=N(t);if(e){var o=N(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?k(t):e}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(a,t);var e,n,i,o=C(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).state={},e.cancelHistory=e.cancelHistory.bind(k(e)),e.cancelVisibility=e.cancelVisibility.bind(k(e)),e.editHistory=e.editHistory.bind(k(e)),e.editVisibility=e.editVisibility.bind(k(e)),e.handleHistoryChange=e.handleHistoryChange.bind(k(e)),e.handleVisibilityChange=e.handleVisibilityChange.bind(k(e)),e.saveHistory=e.saveHistory.bind(k(e)),e.saveVisibility=e.saveVisibility.bind(k(e)),e}return e=a,(n=[{key:"componentDidUpdate",value:function(t){this.props.room!==t.room&&this.setState({editHistory:!1,editVisibility:!1,history:!1,visibility:void 0})}},{key:"render",value:function(){var t,e,n,i;if(!this.props.room)return null;switch(this.props.room.visibility){case"private":e=" private";break;case"publicR":e=" publicly readable";break;case"publicW":e=" publicly writeable";break;default:e=""}return this.props.admin&&(i=this.state.editVisibility?r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-primary".concat("publicW"===this.state.visibility?" active":""),id:"publicW",onClick:this.handleVisibilityChange},r.a.createElement("input",{type:"radio",name:"v"}),"Publically writeable"),r.a.createElement("label",{className:"btn btn-primary".concat("publicR"===this.state.visibility?" active":""),id:"publicR",onClick:this.handleVisibilityChange},r.a.createElement("input",{type:"radio",name:"v"}),"Publically readable"),r.a.createElement("label",{className:"btn btn-primary".concat("private"===this.state.visibility?" active":""),id:"private",onClick:this.handleVisibilityChange},r.a.createElement("input",{type:"radio",name:"v"}),"Private")),r.a.createElement("button",{type:"button",className:"btn btn-success",hidden:this.state.visibility===this.props.room.visibility,onClick:this.saveVisibility},"Save change"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.cancelVisibility},"Cancel change")):r.a.createElement("button",{type:"button",className:"btn btn-primary ml-4",onClick:this.editVisibility},"Edit visibility"),n=this.state.editHistory?r.a.createElement("div",{className:"mt-4"},r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-primary".concat(this.state.history?" active":""),onClick:this.handleHistoryChange},r.a.createElement("input",{type:"checkbox",checked:this.state.history}),this.state.history?"Showing history":"Hiding history")),r.a.createElement("button",{type:"button",className:"btn btn-success",hidden:(this.state.history||!1)===(this.props.room.history||!1),onClick:this.saveHistory},"Save change"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:this.cancelHistory},"Cancel change")):r.a.createElement("button",{type:"button",className:"btn btn-primary ml-4",onClick:this.editHistory},"Edit history")),r.a.createElement("div",{className:"col-12 row mb-4"},r.a.createElement("h4",{className:"col-6"},"This room is",r.a.createElement("strong",null,e),i),r.a.createElement("h4",{className:"col-6"},"History is",r.a.createElement("strong",null,(null===(t=this.props.room)||void 0===t?void 0:t.history)?" saved":" not saved"),n))}},{key:"cancelHistory",value:function(){this.setState({editHistory:!1,history:void 0})}},{key:"editHistory",value:function(){var t;this.setState({editHistory:!0,history:null===(t=this.props.room)||void 0===t?void 0:t.history})}},{key:"cancelVisibility",value:function(){this.setState({editVisibility:!1,visibility:void 0})}},{key:"editVisibility",value:function(){var t;this.setState({editVisibility:!0,visibility:null===(t=this.props.room)||void 0===t?void 0:t.visibility})}},{key:"handleHistoryChange",value:function(){this.setState((function(t){return{history:!t.history}}))}},{key:"handleVisibilityChange",value:function(t){t.currentTarget&&this.setState({visibility:t.currentTarget.id})}},{key:"saveHistory",value:function(){if(this.props.room&&void 0!==this.state.history&&this.props.room.history!==this.state.history&&confirm("Do you want to change the ability to see history in ".concat(this.props.room.name,"?"))){var t={n:!0===this.state.history,r:this.props.room.id};this.props.socket.emit(s.q,t)}}},{key:"saveVisibility",value:function(){if(this.props.room&&this.state.visibility&&this.props.room.visibility!==this.state.visibility&&confirm("Are you sure you want to change the visibility of ".concat(this.props.room.name,"?"))){var t={n:this.state.visibility,o:this.props.room.visibility,r:this.props.room.id};this.props.socket.emit(s.v,t)}}}])&&g(e.prototype,n),i&&g(e,i),a}(r.a.PureComponent);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=I(t);if(e){var o=I(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return R(this,n)}}function R(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?D(t):e}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(a,t);var e,n,i,o=P(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).state={},e.handleCancel=e.handleCancel.bind(D(e)),e.handleChange=e.handleChange.bind(D(e)),e.handleEdit=e.handleEdit.bind(D(e)),e.handleSave=e.handleSave.bind(D(e)),e}return e=a,(n=[{key:"componentDidUpdate",value:function(t){var e;this.props.room&&this.props.room.name!==(null===(e=t.room)||void 0===e?void 0:e.name)&&this.setState({name:void 0,editing:!1})}},{key:"render",value:function(){if(!this.props.room)return null;if(this.state.editing){var t=this.state.name&&this.state.name!==this.props.room.name;return r.a.createElement("div",{className:"input-group col-lg-4 col-xs-12 mb-4"},r.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,value:this.state.name||this.props.room.name}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-success",hidden:!t,onClick:this.handleSave,type:"button"},"Save"),r.a.createElement("button",{className:"btn btn-outline-warning",onClick:this.handleCancel,type:"button"},"Cancel edit")))}return r.a.createElement("div",{className:"input-group col-lg-4 col-xs-12 mb-4"},r.a.createElement("textarea",{className:"form-control",value:this.props.room.name,disabled:!0}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:this.handleEdit,type:"button"},"Edit name")))}},{key:"handleCancel",value:function(){this.setState({name:void 0,editing:!1})}},{key:"handleChange",value:function(t){this.setState({name:t.target.value})}},{key:"handleEdit",value:function(){this.setState({editing:!0})}},{key:"handleSave",value:function(){this.props.room&&this.state.name&&this.props.newName(this.props.room.id,this.props.room.name,this.state.name)}}])&&_(e.prototype,n),i&&_(e,i),a}(r.a.PureComponent);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=z(t);if(e){var o=z(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return A(this,n)}}function A(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?U(t):e}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var W=Object(i.a)((function(){return n.e(4).then(n.bind(null,301))})),J=Object(i.a)((function(){return n.e(9).then(n.bind(null,294))})),L=Object(i.a)((function(){return n.e(11).then(n.bind(null,302))})),q=[],F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(u,t);var e,n,i,o=M(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this,t)).state={roomId:void 0},e.handleChange=e.handleChange.bind(U(e)),e.delete=e.delete.bind(U(e)),e.newDescription=e.newDescription.bind(U(e)),e.newItem=e.newItem.bind(U(e)),e.newName=e.newName.bind(U(e)),e}return e=u,i=[{key:"cancelItemEdit",value:function(){$("#itemCreateModal").modal("hide")}},{key:"toggleItem",value:function(){$("#itemCreateModal").modal("show")}},{key:"toggleModal",value:function(){$("#roomCreateModal").modal("show")}}],(n=[{key:"componentDidUpdate",value:function(t){if(this.state.roomId)if(this.props.rooms.has(this.state.roomId)){var e=this.props.rooms.get(this.state.roomId),n=t.rooms.get(this.state.roomId);this.props.admin&&n&&e.inventory.length>n.inventory.length&&$("#itemCreateModal").modal("hide")}else this.setState({roomId:void 0});this.props.admin&&t.rooms.size!==this.props.rooms.size&&$("#roomCreateModal").modal("hide")}},{key:"render",value:function(){var t,e=this,n=null,i=new Set,o=Array.from(this.props.rooms.entries()).filter((function(t){return t[1].present})).sort((function(t,e){return Object(c.d)(t[1].name,e[1].name,1)})).map((function(t){var o={label:t[1].name,value:t[0]};return t[0]===e.state.roomId&&(n=o),i.add(t[1].section),o})),s=this.props.selected?"visible":"invisible",p=this.props.rooms.get(null===n?"":n.value);return t=this.props.admin?r.a.createElement("div",{className:"mb-4 row col-12"},r.a.createElement(a.a,{options:o,onChange:this.handleChange,styles:c.a,className:"col-lg-10 col-xs-8",value:n}),r.a.createElement("button",{className:"col-lg-2 col-xs-4 btn btn-primary",onClick:u.toggleModal},"New room")):r.a.createElement(a.a,{options:o,onChange:this.handleChange,styles:c.a,className:"col-12 mb-4",value:n}),r.a.createElement("div",{className:s},t,r.a.createElement("div",{className:this.props.admin?"col-12 row":"col-12"},this.props.admin&&r.a.createElement(H,{room:p,newName:this.newName}),r.a.createElement(b,{admin:this.props.admin,delete:this.delete,newDescription:this.newDescription,room:p})),r.a.createElement(S,{admin:this.props.admin,room:p,socket:this.props.socket}),r.a.createElement(W,{edit:this.props.admin,handleItemChange:this.newItem,inventory:(null==p?void 0:p.inventory)||q,name:"room",selected:!0,sidebar:this.props.sidebar,width:this.props.width}),this.props.admin&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{body:r.a.createElement(L,{rooms:this.props.rooms.size,sections:Array.from(i),socket:this.props.socket}),id:"roomCreate",title:"Create a new room"}),r.a.createElement("div",{className:"mt-4 col-12"},r.a.createElement("button",{type:"button",className:"btn btn-primary col-12",onClick:u.toggleItem},"New item")),r.a.createElement(l.a,{body:r.a.createElement(J,{itemCount:(null==p?void 0:p.inventory.length)||0,cancelEdit:u.cancelItemEdit,handleItemChange:this.newItem}),id:"itemCreate",title:"Create an item"})))}},{key:"handleChange",value:function(t){this.setState({roomId:t.value})}},{key:"delete",value:function(t){this.props.socket.emit(s.o,t)}},{key:"newDescription",value:function(t,e,n){var i={n:n,o:e,r:t};this.props.socket.emit(s.p,i)}},{key:"newItem",value:function(t,e){if(this.state.roomId&&this.props.rooms.has(this.state.roomId)){var n={n:e,o:t,r:this.props.rooms.get(this.state.roomId).id};this.props.socket.emit(s.s,n)}}},{key:"newName",value:function(t,e,n){var i={n:n,o:e,r:t};this.props.socket.emit(s.u,i)}}])&&x(e.prototype,n),i&&x(e,i),u}(r.a.PureComponent);e.default=F}}]);