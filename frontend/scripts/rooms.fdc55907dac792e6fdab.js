(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{251:function(t,e,r){"use strict";r(50),r(51),r(52),r(128),r(85),r(35),r(84),r(86),r(53),r(54),r(55),r(56),r(57),r(58),r(59);var n=r(0),o=r.n(n);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(c,t);var e,r,n,a=f(c);function c(){return l(this,c),a.apply(this,arguments)}return e=c,(r=[{key:"render",value:function(){var t=this,e=!0,r=this.props.options.map((function(r){var n,a=i(r,2),c=a[0],l=a[1],s="btn btn-primary".concat(e?" active":"");return n=t.props.handleSort?o.a.createElement("label",{key:c,className:s,onClick:function(){return t.props.handleSort(c)}},o.a.createElement("input",{type:"radio",name:t.props.name,id:c}),l):o.a.createElement("label",{key:c,className:s},o.a.createElement("input",{type:"radio",name:t.props.name,id:c}),l),e=!1,n}));return o.a.createElement("div",{className:"input-group col-12"},o.a.createElement("input",{type:"text",className:"form-control",placeholder:this.props.placeholder,value:this.props.filter,onChange:this.props.handleFilter}),o.a.createElement("div",{className:"input-group-append btn-group btn-group-toggle","data-toggle":"buttons"},r))}}])&&s(e.prototype,r),n&&s(e,n),c}(o.a.PureComponent);e.a=h},297:function(t,e,r){"use strict";r.r(e);r(50),r(51),r(52),r(128),r(85),r(35),r(255),r(84),r(86),r(247),r(53),r(130),r(54),r(55),r(56),r(288),r(265),r(57),r(289),r(58),r(290),r(278),r(250),r(59);var n=r(0),o=r.n(n),a=r(240),i=r(251),c=r(2),l=(r(129),o.a.memo((function(t){var e="".concat(t.isAuthor?"right":"left"," alert alert-primary"),r=t.isAuthor?"You":t.author,n=new Date(t.time).toLocaleString("en-US");return o.a.createElement("div",{className:e},o.a.createElement("div",{className:"msg-header"},r," ",o.a.createElement("span",null,"(",n,")")),o.a.createElement("div",null,t.content))})));function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(i,t);var e,r,n,a=p(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this,t)).state={},e.messages=o.a.createRef(),e.handleScroll=e.handleScroll.bind(h(e)),e.scroll=-1,e}return e=i,(r=[{key:"componentDidMount",value:function(){var t=-1===this.scroll?this.messages.current.scrollHeight:this.scroll;this.messages.current.scrollTop=t}},{key:"componentDidUpdate",value:function(){-1===this.scroll&&(this.messages.current.scrollTop=this.messages.current.scrollHeight)}},{key:"render",value:function(){var t=this,e=this.props.archive.concat(this.props.messages).map((function(e){var r=t.props.username===e.author;return o.a.createElement("div",{key:e.id},o.a.createElement(l,{isAuthor:r,author:e.author,content:e.content,time:e.time}))}));return o.a.createElement("div",{className:"card room"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},this.props.name," (",this.props.section,")"),o.a.createElement("button",{type:"button",className:"close",onClick:function(){return t.props.toggleModal(t.props.id)}},o.a.createElement("span",null,"^")),o.a.createElement("div",{className:"card-text",ref:this.messages,onScroll:this.handleScroll},e)))}},{key:"handleScroll",value:function(){var t=this.messages.current;this.scroll=t.scrollTop===t.scrollTopMax?-1:t.scrollTop}}])&&u(e.prototype,r),n&&u(e,n),i}(o.a.PureComponent);r(263),r(264);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=O(t);if(e){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return E(this,r)}}function E(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?w(t):e}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(t,e)}(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var j=[];function N(t,e){if(0===t.length)return!0;var r,n=_(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.startsWith("a:")){var a=o.substring(2);if(e.author.startsWith(a))return!0}else if(e.content.includes(o))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}var P,k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(c,t);var e,r,n,a=S(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,t)).state={filter:""},e.handleFilter=e.handleFilter.bind(w(e)),e}return e=c,(r=[{key:"render",value:function(){var t,e,r=this,n=this.props.rooms.get(this.props.roomId);n?(t=n.archive,e=n.messages):(t=[],e=[]);var a,c,s=this.state.filter.split(",").filter((function(t){return t.length>0})),u=[],f=_(t);try{for(f.s();!(a=f.n()).done;){var p=a.value,m=this.props.username===p.author;N(s,p)&&u.push(o.a.createElement(l,{key:p.id,isAuthor:m,author:p.author,content:p.content,time:p.time}))}}catch(t){f.e(t)}finally{f.f()}t.length>0&&u.push(o.a.createElement("hr",{key:"hr",className:"bg-dark"})),n&&n.hasArchive||(c=o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return r.props.getLogs(r.props.roomId)}},"Get logs"));var h,y,d=_(e);try{for(d.s();!(h=d.n()).done;){var b=h.value,v=this.props.username===b.author;N(s,b)&&u.push(o.a.createElement(l,{key:b.id,isAuthor:v,author:b.author,content:b.content,time:b.time}))}}catch(t){d.e(t)}finally{d.f()}(u.length>0||""!==this.state.filter)&&(y=o.a.createElement(i.a,{name:this.props.roomId,filter:this.state.filter,handleFilter:this.handleFilter,options:j,placeholder:"Enter text to search, or a: to find a sender"}));var g=u.length>0?o.a.createElement("hr",{className:"bg-dark"}):void 0;return o.a.createElement("div",{className:"modal fade",id:"roomsModal",tabIndex:-1,role:"dialog"},o.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title",id:"roomsModalLabel"},null==n?void 0:n.name," (",null==n?void 0:n.section,")"),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),o.a.createElement("div",{className:"modal-body"},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:(null==n?void 0:n.description)||""}}),o.a.createElement("hr",{className:"bg-dark"}),y,g,o.a.createElement("div",{className:"messages"},u)),o.a.createElement("div",{className:"modal-footer"},c,o.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")))))}},{key:"handleFilter",value:function(t){this.setState({filter:t.target.value})}}])&&v(e.prototype,r),n&&v(e,n),c}(o.a.PureComponent);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,a=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=H(t);if(e){var o=H(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}function L(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?D(t):e}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.ALPHA_INC_SECTION="atoz-s",t.ALPHA_DEC_SECTION="ztoa-s",t.ALPHA_INC_ROOM="atoz-r",t.ALPHA_DEC_ROOM="ztoa-r"}(P||(P={}));var z=[[P.ALPHA_INC_SECTION,"A to Z (by section)"],[P.ALPHA_DEC_SECTION,"Z to A (by section)"],[P.ALPHA_INC_ROOM,"A to Z (by room)"],[P.ALPHA_DEC_ROOM,"Z to A (by room)"]],F=["lg","md","sm","xs","xxs"],W={lg:12,md:10,sm:6,xs:6,xxs:6};function U(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function Z(t){return new RegExp("^".concat(t.split("*").map(U).join(".*"),".*"))}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(s,t);var e,r,n,l=T(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=l.call(this,t)).state={cols:12,filter:"",roomId:void 0,sizes:new Map,sort:P.ALPHA_INC_ROOM},e.handleFilter=e.handleFilter.bind(D(e)),e.handleLayout=e.handleLayout.bind(D(e)),e.toggleModal=e.toggleModal.bind(D(e)),e.handleSort=e.handleSort.bind(D(e)),e.handleWidth=e.handleWidth.bind(D(e)),e}return e=s,(r=[{key:"render",value:function(){var t=this,e=[],r=this.props.width-(this.props.sidebar?200:0),n=0,l=0,s=Array.from(this.props.rooms.entries()),u=this.state.sort;if(""!==this.state.filter){var f=this.state.filter.split(",").filter((function(t){return t.replace("s:","").length>0})).map(Z);s=s.filter((function(t){var e,r=C(f);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.test(t[1].name)||n.test("s:".concat(t[1].section)))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}))}var p,m=u.startsWith("atoz")?1:-1,h=(s=s.sort((function(t,e){var r=t[1],n=e[1];return u.endsWith("-s")?Object(c.b)(r.section,n.section,m):Object(c.b)(r.name,n.name,m)}))).map((function(r){var a=r[1].name,i=4,c=6;if(t.state.sizes.has(a)){var s=t.state.sizes.get(a);c=s[0],i=s[1]}return e.push({i:a,x:n,y:l,w:c,h:i}),(n+=6)>=t.state.cols&&(n=0,l++),o.a.createElement("div",{key:a},o.a.createElement(d,{archive:r[1].archive,id:r[0],section:r[1].section,description:r[1].description,name:a,messages:r[1].messages,username:t.props.username,toggleModal:t.toggleModal}))})),y={},b=C(F);try{for(b.s();!(p=b.n()).done;)y[p.value]=e}catch(t){b.e(t)}finally{b.f()}var v=this.props.selected?"visible":"invisible";return o.a.createElement("div",{className:v},o.a.createElement(i.a,{filter:this.state.filter,handleFilter:this.handleFilter,options:z,handleSort:this.handleSort,placeholder:"a room name, sector (s:), wildcard (*), or list (comma separated)",name:"rooms"}),o.a.createElement(a.Responsive,{className:"layout rooms mt-4",rowHeight:60,width:r,layouts:y,onLayoutChange:this.handleLayout,onWidthChange:this.handleWidth,cols:W},h),o.a.createElement(k,{getLogs:this.props.getLogs,roomId:this.state.roomId||"",rooms:this.props.rooms,username:this.props.username}))}},{key:"handleFilter",value:function(t){this.setState({filter:t.target.value})}},{key:"handleLayout",value:function(t){0!==t.length&&this.setState((function(e){var r,n=e.sizes,o=new Map,a=!1,i=C(t);try{for(i.s();!(r=i.n()).done;){var c=r.value,l=n.get(c.i);(void 0===l||l[0]!==c.w||l[1]!==c.h)&&(o.set(c.i,[c.w,c.h]),a=!0)}}catch(t){i.e(t)}finally{i.f()}return a?{sizes:o}:{sizes:n}}))}},{key:"toggleModal",value:function(t){this.setState({roomId:t}),$("#roomsModal").modal("show")}},{key:"handleSort",value:function(t){this.setState({sort:t})}},{key:"handleWidth",value:function(t,e,r){r!==this.state.cols&&this.setState({cols:r})}}])&&x(e.prototype,r),n&&x(e,n),s}(o.a.PureComponent);e.default=J}}]);